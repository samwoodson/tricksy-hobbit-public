<div class="container">
  <h3>Game ID: <%= @game.id %></h3>
  <h1>
    Welcome to <%=@game.owner.first_name %>'s game!
  </h1>
  <% if @game.pending? %>
    <section id="controls" class="col-md-6 col-md-offset-0">
      <% if @game.owner == current_user %>
        <%= button_to "Start the game!", game_play_game_path(@game), method: :get %>
      <% else %>
        <% if @player %>
          <%= button_to "Leave this game!", game_player_path(@game, @player), method: :delete %>
        <% else %>
          <%= button_to "Join this game!", game_players_path(@game) %>
        <% end %>
      <% end %>
    </section>
    <section id="wait-list">
      <h2>Currently Waiting Players:</h2>
      <ul id="player-list">
        <% @game.players.each do |player| %>
          <li id="user-<%= player.user.id %>"><%= player.user.name %></li>
        <% end %>
      </ul>
    </section>
    <script defer>subscribeRoomChannel(<%= @game.id %>)</script>
  <% elsif @game.active? %>
    <% if @player %>
      <div class="row">
        <div class="col-md-8 col-sm-6"> 
          <table id = "game-questions"></table>
        </div>

        <div class="col-md-4 col-sm-6">
          <h1>Players progress</h1>
          <ul id ="answers"></ul>
        </div>
      </div>
      <script defer>beginGame(<%= @game.id %>)</script>
    <% else %>
      <h2>Game started without you.<h2/>
    <% end %>
  <% else %>
    <h2>Game is over.</h2>
  <% end %>
</div>
